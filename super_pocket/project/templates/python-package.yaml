name: python-package
display_name: "Python Package"
description: "Python package for PyPI distribution with testing and documentation"

python_version: ">=3.11"

tool_choices:
  package_manager:
    prompt: "Which package manager?"
    default: uv
    options:
      - name: uv
        description: "uv - blazingly fast (recommended)"
      - name: poetry
        description: "poetry - mature, feature-rich"
      - name: setuptools
        description: "setuptools - traditional, widely compatible"

  docs_tool:
    prompt: "Which documentation tool?"
    default: none
    options:
      - name: sphinx
        description: "Sphinx - powerful, extensible documentation"
      - name: mkdocs
        description: "MkDocs - simple, markdown-based docs"
      - name: none
        description: "No documentation setup"

features:
  - name: testing
    description: "Testing setup with pytest"
    default: true

  - name: type_stubs
    description: "py.typed marker for type stub support"
    default: true

  - name: github_actions
    description: "GitHub Actions CI/CD with PyPI publish"
    default: false

  - name: precommit
    description: "pre-commit hooks for code quality"
    default: false

  - name: changelog
    description: "CHANGELOG.md for version tracking"
    default: true

structure:
  - path: "src/{{ project_name }}"
    type: directory

  - path: "src/{{ project_name }}/__init__.py"
    template: "__init__.py.j2"

  - path: "src/{{ project_name }}/core.py"
    template: "core.py.j2"

  - path: "src/{{ project_name }}/py.typed"
    type: file
    condition: "features.type_stubs"

  - path: "tests"
    type: directory
    condition: "features.testing"

  - path: "tests/__init__.py"
    condition: "features.testing"

  - path: "tests/test_core.py"
    template: "test_core.py.j2"
    condition: "features.testing"

  - path: "pyproject.toml"
    template: "pyproject_{{ tool_choices.package_manager }}.toml.j2"

  - path: "README.md"
    template: "README.md.j2"

  - path: "CHANGELOG.md"
    template: "CHANGELOG.md.j2"
    condition: "features.changelog"

  - path: ".gitignore"
    template: "gitignore.j2"

  - path: ".github/workflows/ci.yml"
    template: "github_workflow.yml.j2"
    condition: "features.github_actions"

  - path: ".pre-commit-config.yaml"
    template: "pre-commit-config.yaml.j2"
    condition: "features.precommit"

post_generation:
  - action: git_init

  - action: create_venv
    params:
      package_manager: "{{ tool_choices.package_manager }}"

  - action: install_dependencies
    params:
      package_manager: "{{ tool_choices.package_manager }}"
      dev: true

  - action: display_next_steps
